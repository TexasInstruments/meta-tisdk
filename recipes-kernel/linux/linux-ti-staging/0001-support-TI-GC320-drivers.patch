From 71f1a8c5b3dc246d43488c1d752d3a7729326b3d Mon Sep 17 00:00:00 2001
From: Sinthu Raja <sinthu.raja@ti.com>
Date: Fri, 24 Nov 2023 07:26:10 +0000
Subject: [PATCH] support TI GC320 drivers

update device tree to support TI GC320 drivers

Signed-off-by: Sinthu Raja <sinthu.raja@ti.com>
---
 arch/arm/boot/dts/dra7.dtsi         | 2 +-
 arch/arm/configs/multi_v7_defconfig | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/arch/arm/boot/dts/dra7.dtsi b/arch/arm/boot/dts/dra7.dtsi
index 38737ca12541..cd8282f3332e 100644
--- a/arch/arm/boot/dts/dra7.dtsi
+++ b/arch/arm/boot/dts/dra7.dtsi
@@ -983,7 +983,7 @@ target-module@59000000 {
 			ranges = <0x0 0x59000000 0x1000>;
 
 			bb2d: gpu@0 {
-				compatible = "vivante,gc";
+				compatible = "ti,dra7-bb2d";
 				reg = <0x0 0x700>;
 				interrupts = <GIC_SPI 120 IRQ_TYPE_LEVEL_HIGH>;
 				clocks = <&dss_clkctrl DRA7_DSS_BB2D_CLKCTRL 0>;
diff --git a/arch/arm/configs/multi_v7_defconfig b/arch/arm/configs/multi_v7_defconfig
index 7fbb6ea78627..67b90b7e9598 100644
--- a/arch/arm/configs/multi_v7_defconfig
+++ b/arch/arm/configs/multi_v7_defconfig
@@ -108,6 +108,7 @@ CONFIG_ARCH_VEXPRESS=y
 CONFIG_ARCH_VEXPRESS_TC2_PM=y
 CONFIG_ARCH_WM8850=y
 CONFIG_ARCH_ZYNQ=y
+CONFIG_ARM_LPAE=y
 CONFIG_SMP=y
 CONFIG_NR_CPUS=16
 CONFIG_ARM_APPENDED_DTB=y
-- 
2.34.1

